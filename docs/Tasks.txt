~~~~~~~~~~~~~~~~~~~~~~~~
CURRENT TASK
~~~~~~~~~~~~~~~~~~~~~~~~

	!!!!DB MIGRATION WILL DELETE ALL CASUALS, COVERS, MSTEAMOPERATIONS, and ADOBECONNECTOPERATIONS!!!!

	CLASS COVERS:
		*Refactor to use Aggregate Root functionality
		*Migrate to domain events
		*Refactor existing code to use new model
		*Create unit tests for new domain model methods and events
		*Add error return for page events

	PARENTS:
		*Complete new student details page
			Update the bulk enrol and migrate the bulk unenrol code to the page
		Create domain event handlers to add/remove/update user accounts
		Create CRUD pages for non-residential parents
		Create master contact list with per student entry for parents, ACCs, and SPTs
		Create migration and test
		
	DDD:
		*Create strongly typed ID objects
		*Update EntityTypeConfigurations
			*change to internal class
			*create conversion for strongly typed ids
			create custom indexes

~~~~~~~~~~~~~~~~~~~~~~~~
FUTURE PLANS
~~~~~~~~~~~~~~~~~~~~~~~~

ACTIONS:
		Migrate to AccessRight concept
		Tickets are created for access to resources, with defined start and end dates
		Tickets are linked to the object that defines the right: e.g. cover, enrolment, session etc
		Audit can tally the tickets to determine the ideal current state of access to a resource
		Removing the source of the ticket (e.g. the cover expires or is cancelled) removes that ticket only, so if there is another ticket
			that grants access to a resource, access is retained
		Tickets should not be deletable (soft or hard) but instead the expiry date should be moved if the ticket needs to end earlier
			than originally intended. This would allow for historic access audits, i.e. being able to tell who should have had access
			at a particular time.
		Tickets should include audit functions (e.g. who created it and when) separate from the expiry dates of the ticket itself.

SCHOOL PORTAL:
	Consolidate the server-side controllers that do not have much use (e.g. put the students and staff into the SCHOOL controller, etc.)
	Refactor the exam submission flow to make it more wizard-like

REFACTOR:
	*Move the external connections to separate subfolders, including the gateway, configuration, and service.
		e.g. \ExternalServices
				\Sentral
					SentralGateway
					SentralGatewayConfiguration
					SentralGatewayService
	*Create separate public servicecollection extensions for each external service
	Remove all direct usage of external services from mediator handlers and enforce service usage
	 This doesn't solve the issue where Mediatr handlers would be automatically registered - would need
	  to move each to a separate project for that
	 Mediatr Handlers are all that are registered. The Command or Query itself can be in a shared project, 
	  but there wouldn't be any handler to process.


APP PERMISSIONS:
	Implement generic permissions as per https://learn.microsoft.com/en-us/aspnet/core/security/authorization/policies?view=aspnetcore-6.0#use-a-handler-for-multiple-requirements
	Permission Structure:
	 SchoolContact = Portal.School.User
	 Parent = Portal.Parent.User

SENTRAL:
	** Parent Portal only access Sentral directly inside APPLICATION\FEATURES\ATTENDANCE\QUERIES\GETVALIDATTENDANCEREPORTDATESQUERY

ADOBE CONNECT:
	Remove direct link for Adobe Connect Room to Session, allowing a class to be created without a Connect Room.

OPERATIONS:
	Return more meaningful errors to log for troubleshooting

COVERS:
	Add link landing page that checks access dates before sending people to the actual teams link

LINK SHORTENER:
	Provide interface for custom shortening of long URLs on custom domain

MISSED CLASSWORK:
	Periodic report for HTs on what hasn't been completed
	Provide option to HT for cancellation/mark done of a notification without sending an email

TRACKITSYNC JOB:
	Convert to individual MEDIATR actions, to allow for calling immediately when relevant records change

GRADES:
	Migrate from ENUM to object



HANGFIRE DASHBOARD:
	Add TRIGGER NOW button for one-off job registration
	Add TRIGGER OUTSIDE HANGFIRE button for interactive sessions
	Manage once-per-day job continuation

SCHOOLS PORTAL LOGIN:
	Return status from MEDIATR find user action, so that an error message can be displayed as appropriate when an inactive user is detected

ATTENDANCE REPORT JOB:
	Save generated files to database

ABSENCES:
	Externally explained absences created as Response records are being created every scan. Need to update detection so they are recognised as an explained absence.

~~~~~~~~~~~~~~~~~~~~~~~~
DONE
~~~~~~~~~~~~~~~~~~~~~~~~

R1.4:
	SCHOOLS PORTAL:
		Add Stocktake function listing all sighted devices for the linked school
		Add Stocktake sighting function, allowing users to submit stocktake information
		Show list and tally of awards listings per student

	EQUIPMENT:
		Add Stocktake function to create stocktake events
		Add Stocktake details view to list all reported device sightings
		Add Stocktake Staff Dashboard to allow staff to review their sighted devices
		Add Staff sighting function, allowing staff to submit stocktake information

	REPORTS:
		Change Awards Report to use locally cached data instead of uploaded Sentral extract
		Create new Awards Report views, including graph dashboard

	JOBS:
		Create new SentralAwardSyncJob to cache student awards locally

	SCHOOL CONTACTS:
		Add school contact to role from the School Contact view
		Add new School Contact to role at creation

	ASSIGNMENTS:
		Add details view for Assignments including list of submissions
		Allow teachers to re-push submissions to Canvas if required

R1.3:
	PTO EXPORT FILE:
		Update to use Student Families instead of pulling from Sentral each time
		Update to create a single parent entry for families with a single email address
		Update to support separate parent accounts for families with different email addresses
		Update to support selectable per-family or per-parent details export

	SCHOOLS PORTAL:
		Add timetables view and download options

	SCHOOLS:
		Add titles to set school maps pages

	COVERS:
		Send calendar appointment for notification of single day covers
		Add timetable sheet to multi-day covers

	SENTRAL FAMILY DETAILS SYNC JOB:
		Migrate to using different sources to make it more reliable and take advantage of the new 3PI data

R1.2:
	WEB LOGON:
		Add client-side validation rules to ensure email address uses correct domain
		
	PARENT CONTACTS:
		Report any empty email addresses to school administration for investigation

	JOBS:
		Confirm that only one copy of a job can be queued at a single time. Subsequent jobs are stopped and not left queued.
		Add log text when cancelled
		Confirm that cancellation token implementation will exit jobs

	SENTRALPHOTOSYNC:
		Photos are always being replaced in database. Resolve check for uniqueness first.

	MISSED CLASSWORK:
		Remove outstanding entries when students withdraw

	SCHOOL CONTACTS:
		Remove duplicate entries in search results before showing
		
	ABSENCES:
		Migrate Externally Explained to an actual Response record instead of top level fields

	LESSON ROLLS:
		Trigger update of Lesson Rolls when a student is moved between schools
		Update Admin Portal to include grade in search results

	REPORTS:
		FTE Calculation now includes breakdown by gender per grade

R1.1:
	CHANGE LOG:
		Include link in footer to changelog for current release
	
	STAFF:
		Fix bug where faculty membership was not being saved to the database

	ADOBE CONNECT ACTIONS:
		Complete migration of action to scan for new rooms

	TEAMS:
		Cache team ids in database to prevent needing to search for teams at start of operations

	PARENT CONTACTS:
		Convert all parent contact jobs to use the local contact details before attempting to reach out to Sentral

	CLEANARCH:
		Move CQRS handlers to Infrastructure project

	BUD GRAPHS:
		Complete migration of api endpoints to allow for graphs to be saved at end of day

	EMAILS:
		Convert all images to use BASE64 values instead of linked files

	SCHOOL PORTAL:
		Migrate functions to school portal

	ERROR:
		Modify error page to give some information on what is happening.

	EMAILS:
		Make sure every email process dedups the list of contacts before added them.

	CANVAS:
		Paper Exam Submission Portal => take file uploads from ACC and proxy it up to CANVAS as student submission of assignment

	PARENT CONTACTS:
		https://admin.aurora.dec.nsw.gov.au/enquiry/export/view_export?name=complete&inputs[class]=&inputs[roll_class]=&inputs[schyear]=&format=csv&headings=1&action=Download
		Sync parent contacts from Sentral once per day
			Do not replace local details if the source is blank/missing from Sentral